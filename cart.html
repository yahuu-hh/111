<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>购物车</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/mi.css">
    <link rel="stylesheet" href="./css/iconfont/iconfont.css">
    <link rel="stylesheet" href="./css/cart.css">
     
</head>
<body>
    <div id="cart-page">
        <h1>购物车</h1>
        <ul id="cart-items">
            <!-- 购物车商品列表将动态生成在这里 -->
        </ul>
        <div class="cart-total">
            <p>总价: <span id="total-price"></span>元</p>
                <button id="clear-cart-btn">结算</button>
                <button id="clear-cart-btn">清空购物车</button>
            </div>
        </div>
    </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const clearCartButton = document.getElementById('clear-cart-btn');
            const cartItems = document.getElementById('cart-items');
            const totalPriceElement = document.getElementById('total-price');

            // 从本地存储中获取购物车数据
            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            // 渲染购物车商品列表
            renderCart();

            // 清空购物车按钮的点击事件处理函数
            clearCartButton.addEventListener('click', function() {
                // 从本地存储中删除购物车数据
                localStorage.removeItem('cart');

                // 清空购物车数组
                cart = [];

                // 更新购物车显示
                renderCart();
            });

            // 渲染购物车的函数
            function renderCart() {
                cartItems.innerHTML = '';
                let totalPrice = 0;

                cart.forEach(item => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span>${item.name}</span>
                        <span>${item.price}</span>
                    `;
                    cartItems.appendChild(li);

                    // 计算总价
                    totalPrice += parseFloat(item.price);
                });

                // 更新总价显示
                totalPriceElement.textContent = totalPrice.toFixed(2);
            }
        });
    </script>
</body>
</html>
